11/26/2017

Exception in thread [google]SelScrape:
Traceback (most recent call last):
  File "/home/nvl0834/.conda/envs/nick_default/lib/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "../SerpScrap/scrapcore/scraper/selenium.py", line 770, in run
    if not self._get_webdriver():
  File "../SerpScrap/scrapcore/scraper/selenium.py", line 240, in _get_webdriver
    return self._get_Chrome()
  File "../SerpScrap/scrapcore/scraper/selenium.py", line 278, in _get_Chrome
    chrome_options=chrome_ops
  File "/home/nvl0834/.conda/envs/nick_default/lib/python3.6/site-packages/selenium/webdriver/chrome/webdriver.py", line 69, in __init__
    desired_capabilities=desired_capabilities)
  File "/home/nvl0834/.conda/envs/nick_default/lib/python3.6/site-packages/selenium/webdriver/remote/webdriver.py", line 140, in __init__
    self.start_session(desired_capabilities, browser_profile)
  File "/home/nvl0834/.conda/envs/nick_default/lib/python3.6/site-packages/selenium/webdriver/remote/webdriver.py", line 229, in start_session
    response = self.execute(Command.NEW_SESSION, parameters)
  File "/home/nvl0834/.conda/envs/nick_default/lib/python3.6/site-packages/selenium/webdriver/remote/webdriver.py", line 297, in execute
    self.error_handler.check_response(response)
  File "/home/nvl0834/.conda/envs/nick_default/lib/python3.6/site-packages/selenium/webdriver/remote/errorhandler.py", line 194, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.WebDriverException: Message: unknown error: Chrome failed to start: exited abnormally
  (Driver info: chromedriver=2.33.506092 (733a02544d189eeb751fe0d7ddca79a0ee28cce4),platform=Linux 3.10.0-693.5.2.el7.x86_64 x86_64)



1/25/2018
This error is rearing its head again.

Exception in thread [google]SelScrape:
Traceback (most recent call last):
  File "/home/nvl0834/.conda/envs/nick_default/lib/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "../SerpScrap/scrapcore/scraper/selenium.py", line 775, in run
    if not self._get_webdriver():
  File "../SerpScrap/scrapcore/scraper/selenium.py", line 240, in _get_webdriver
    return self._get_Chrome()
  File "../SerpScrap/scrapcore/scraper/selenium.py", line 281, in _get_Chrome
    chrome_options=chrome_ops
  File "/home/nvl0834/.conda/envs/nick_default/lib/python3.6/site-packages/selenium/webdriver/chrome/webdriver.py", line 69, in __init__
    desired_capabilities=desired_capabilities)
  File "/home/nvl0834/.conda/envs/nick_default/lib/python3.6/site-packages/selenium/webdriver/remote/webdriver.py", line 140, in __init__
    self.start_session(desired_capabilities, browser_profile)
  File "/home/nvl0834/.conda/envs/nick_default/lib/python3.6/site-packages/selenium/webdriver/remote/webdriver.py", line 229, in start_session
    response = self.execute(Command.NEW_SESSION, parameters)
  File "/home/nvl0834/.conda/envs/nick_default/lib/python3.6/site-packages/selenium/webdriver/remote/webdriver.py", line 297, in execute
    self.error_handler.check_response(response)
  File "/home/nvl0834/.conda/envs/nick_default/lib/python3.6/site-packages/selenium/webdriver/remote/errorhandler.py", line 194, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.WebDriverException: Message: unknown error: Chrome failed to start: exited abnormally
  (Driver info: chromedriver=2.33.506092 (733a02544d189eeb751fe0d7ddca79a0ee28cce4),platform=Linux 3.10.0-693.11.6.el7.x86_64 x86_64)

This happeneded on the 12th page (6th query, 2 locations)
Going to use logger to try to figure it out faster
Also happens w/ only TWO LOCATIONS. So it's not a certain number of simultaneous threads that causes the error.



Some technical details
Digging into the chromedriver logs, it looks like after initializing a chomre instance, chromedriver makes a request to 
DevTools request: http://localhost:12162/json/version

Sometimes, it tries this many many times w/ no response and then the crash occurs!


This g thread: https://groups.google.com/forum/#!msg/chromedriver-users/2pxHCAINxX0/zZQwdumcAgAJ 
suggests this github convo from selenium-docker: https://github.com/SeleniumHQ/docker-selenium/issues/87
which suggests this fix:
export DBUS_SESSION_BUS_ADDRESS=/dev/null

I also found this official bug report:
https://bugs.chromium.org/p/chromedriver/issues/detail?id=1620

Hasn't worked yet.

Also put this directly into the code...


Run Xvfb as sudo?
[nvl0834@butter you-geo-see]$ sudo Xvfb :1 -screen 0 1024x900x24
